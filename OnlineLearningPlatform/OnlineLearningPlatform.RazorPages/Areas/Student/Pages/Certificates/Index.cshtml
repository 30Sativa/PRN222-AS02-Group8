@page
@model OnlineLearningPlatform.RazorPages.Areas.Student.Pages.Certificates.IndexModel
@{
    ViewData["Title"] = "Ch·ª©ng ch·ªâ c·ªßa t√¥i";
}

<div class="page-head">
    <div class="breadcrumb">
        <a asp-area="Student" asp-page="/Dashboard">Dashboard</a>
        <span class="breadcrumb-sep">/</span>
        <span>Ch·ª©ng ch·ªâ</span>
    </div>
    <h1>Ch·ª©ng ch·ªâ ho√†n th√†nh</h1>
</div>

@if (!Model.Certificates.Any())
{
    <div class="card card-body" style="text-align: center; padding: 60px 20px;">
        <h3 style="color: var(--color-label-2); margin-bottom: 16px;">B·∫°n ch∆∞a c√≥ ch·ª©ng ch·ªâ n√†o</h3>
        <p style="color: var(--color-label-3);">H√£y ho√†n th√†nh kh√≥a h·ªçc ƒë·ªÉ nh·∫≠n ch·ª©ng ch·ªâ nh√©.</p>
        <div style="margin-top: 24px;">
            <a asp-area="Student" asp-page="/Courses/Index" class="btn btn-primary">Kh√°m ph√° kh√≥a h·ªçc</a>
        </div>
    </div>
}
else
{
    <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 24px;">
        @foreach (var c in Model.Certificates)
        {
            <div class="card" style="padding: 24px;">
                <div style="width: 48px; height: 48px; border-radius: 50%; background: var(--color-blue-tint); color: var(--color-blue); display: flex; align-items: center; justify-content: center; font-size: 24px; margin-bottom: 20px;">
                    üéì
                </div>
                <h3 style="font-size: var(--text-md); font-weight: 600; margin-bottom: 8px; line-height: 1.3;">@c.CourseTitle</h3>
                <p style="font-size: var(--text-sm); color: var(--color-label-2); margin-bottom: 4px;">Gi·∫£ng vi√™n: @c.TeacherName</p>
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
                    <span style="font-size: var(--text-xs); color: var(--color-label-3); letter-spacing: 1px; text-transform: uppercase;">M√É: @c.CertificateCode</span>
                    <span style="font-size: var(--text-sm); font-weight: 500;">@c.IssuedAt.ToLocalTime().ToString("dd/MM/yyyy")</span>
                </div>
                <div style="display: flex; gap: 8px;">
                    <a asp-page-handler="View" asp-route-code="@c.CertificateCode" target="_blank" class="btn btn-secondary" style="flex: 1;">Xem PDF</a>
                    <a asp-page-handler="Download" asp-route-code="@c.CertificateCode" class="btn btn-primary" style="flex: 1;">T·∫£i PDF</a>
                    <button class="btn btn-secondary" onclick="copyCode('@c.CertificateCode')" title="Sao ch√©p m√£ ch·ª©ng ch·ªâ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                    </button>
                </div>
            </div>
        }
    </div>
}

@section Scripts {
    <script>
        function copyCode(code) {
            navigator.clipboard.writeText(code).then(() => {
                alert("ƒê√£ sao ch√©p m√£ ch·ª©ng ch·ªâ: " + code);
            });
        }
    </script>
}
