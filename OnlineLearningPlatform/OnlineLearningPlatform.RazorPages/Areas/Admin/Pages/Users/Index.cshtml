@page
@model OnlineLearningPlatform.RazorPages.Areas.Admin.Pages.Users.IndexModel
@{
    ViewData["Title"] = "Qu·∫£n l√Ω Users";
}

<div class="page-header fade-in">
    <h1>üë• Qu·∫£n l√Ω Ng∆∞·ªùi d√πng</h1>
    <span class="breadcrumb-text">
        <a asp-area="Admin" asp-page="/Dashboard" style="color:var(--primary);">Dashboard</a> ‚Üí Danh s√°ch ng∆∞·ªùi d√πng
    </span>
</div>

<!-- Search + Toolbar -->
<div class="olp-card fade-in">
    <div class="olp-card-header">
        <h2>Danh s√°ch (@Model.Users.Count ng∆∞·ªùi d√πng)</h2>
        <form method="get" class="search-bar">
            <span>üîç</span>
            <input type="text" name="search" value="@Model.SearchTerm" placeholder="T√¨m theo t√™n, email..." />
            <button type="submit">T√¨m</button>
        </form>
    </div>
    <div class="olp-card-body" style="padding:0;">
        @if (Model.Users.Any())
        {
            <div class="olp-table-wrapper">
                <table class="olp-table">
                    <thead>
                        <tr>
                            <th>Ng∆∞·ªùi d√πng</th>
                            <th>SƒêT</th>
                            <th>Role</th>
                            <th>H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var user in Model.Users)
                        {
                            // Ch·ªçn m√†u avatar theo role
                            var avatarClass = user.Role switch
                            {
                                "Admin" => "avatar-admin",
                                "Teacher" => "avatar-teacher",
                                _ => "avatar-student"
                            };
                            var badgeClass = user.Role switch
                            {
                                "Admin" => "badge-admin",
                                "Teacher" => "badge-teacher",
                                _ => "badge-student"
                            };

                            <tr>
                                <td>
                                    <div class="user-cell">
                                        <div class="avatar @avatarClass">
                                            @(user.FullName?[0].ToString().ToUpper() ?? "U")
                                        </div>
                                        <div class="user-info">
                                            <div class="name">@user.FullName</div>
                                            <div class="email">@user.Email</div>
                                        </div>
                                    </div>
                                </td>
                                <td>@(user.PhoneNumber ?? "Ch∆∞a c·∫≠p nh·∫≠t")</td>
                                <td><span class="badge @badgeClass">@user.Role</span></td>
                                <td>
                                    <div class="btn-group-actions">
                                        <a asp-page="/Users/Detail" asp-route-id="@user.Id"
                                           class="btn-secondary-olp btn-sm">üëÅÔ∏è Xem</a>
                                        <a asp-page="/Users/Edit" asp-route-id="@user.Id"
                                           class="btn-primary-olp btn-sm">‚úèÔ∏è S·ª≠a</a>
                                    </div>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        }
        else
        {
            <div class="empty-state">
                <div class="empty-icon">üîç</div>
                <h3>Kh√¥ng t√¨m th·∫•y ng∆∞·ªùi d√πng</h3>
                <p>Th·ª≠ t√¨m ki·∫øm v·ªõi t·ª´ kh√≥a kh√°c.</p>
            </div>
        }
    </div>
</div>
